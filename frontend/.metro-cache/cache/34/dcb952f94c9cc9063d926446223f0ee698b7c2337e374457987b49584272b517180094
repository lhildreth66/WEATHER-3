{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":196},"end":{"line":8,"column":33,"index":229}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":230},"end":{"line":9,"column":69,"index":299}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useWaterBudget\", {\n    enumerable: true,\n    get: function () {\n      return useWaterBudget;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3]);\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  /**\n   * useWaterBudget - React Hook for Water Budget Estimation\n   *\n   * Custom hook for calling the water budget API endpoint and managing state.\n   * Follows the same pattern as usePropaneUsage.\n   */\n\n  var API_BASE = 'http://localhost:8000';\n\n  // Type-safe interfaces matching API models\n\n  /**\n   * Hook for water budget estimation\n   *\n   * Usage:\n   * ```typescript\n   * const { estimate, loading, error, result } = useWaterBudget();\n   *\n   * await estimate({\n   *   fresh_gal: 40,\n   *   gray_gal: 50,\n   *   black_gal: 20,\n   *   people: 2,\n   *   showers_per_week: 2,\n   *   hot_days: false,\n   * });\n   *\n   * if (result?.is_premium_locked) {\n   * // Handle premium response\n   * } else if (result?.days_remaining !== undefined) {\n   *   // Display results\n   * }\n   * ```\n   */\n  var useWaterBudget = () => {\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n    var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n    var _useState5 = (0, _react.useState)(null),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      result = _useState6[0],\n      setResult = _useState6[1];\n    var estimate = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (request) {\n        setLoading(true);\n        setError(null);\n        try {\n          // Retrieve subscription ID from AsyncStorage if not provided\n          var subscriptionId = request.subscription_id;\n          if (!subscriptionId) {\n            try {\n              subscriptionId = yield AsyncStorage.default.getItem('subscription_id');\n            } catch (e) {\n              console.log('Could not retrieve subscription ID from storage');\n            }\n          }\n\n          // Call API endpoint\n          var response = yield fetch(`${API_BASE}/api/pro/water-budget`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              ...request,\n              subscription_id: subscriptionId\n            })\n          });\n          if (!response.ok) {\n            // Try to parse error detail from response\n            var errorDetail = `HTTP ${response.status}`;\n            try {\n              var errorData = yield response.json();\n              if (errorData.detail) {\n                errorDetail = errorData.detail;\n              }\n            } catch {\n              // If response isn't JSON, use status message\n              errorDetail = response.statusText || `HTTP ${response.status}`;\n            }\n            throw new Error(errorDetail);\n          }\n          var data = yield response.json();\n\n          // Detect premium-locked response\n          if (data.is_premium_locked && data.premium_message) {\n            setError(data.premium_message);\n            setResult(data);\n            setLoading(false);\n            return data;\n          }\n\n          // Success\n          setResult(data);\n          setLoading(false);\n          return data;\n        } catch (err) {\n          var errorMessage = err instanceof Error ? err.message : 'Unknown error';\n          console.error('Error in useWaterBudget:', errorMessage);\n          setError(errorMessage);\n          setLoading(false);\n          return null;\n        }\n      });\n      return function estimate(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var clearResult = () => {\n      setResult(null);\n      setError(null);\n    };\n    return {\n      estimate,\n      loading,\n      error,\n      result,\n      clearResult\n    };\n  };\n});","lineCount":150,"map":[[12,2,67,0,"Object"],[12,8,67,0],[12,9,67,0,"defineProperty"],[12,23,67,0],[12,24,67,0,"exports"],[12,31,67,0],[13,4,67,0,"enumerable"],[13,14,67,0],[14,4,67,0,"get"],[14,7,67,0],[14,18,67,0,"get"],[14,19,67,0],[15,6,67,0],[15,13,67,0,"useWaterBudget"],[15,27,67,0],[16,4,67,0],[17,2,67,0],[18,2,151,2],[18,6,151,2,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,151,2],[18,45,151,2,"require"],[18,52,151,2],[18,53,151,2,"_dependencyMap"],[18,67,151,2],[19,2,151,2],[19,6,151,2,"_asyncToGenerator"],[19,23,151,2],[19,26,151,2,"_interopDefault"],[19,41,151,2],[19,42,151,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,151,2],[20,2,151,2],[20,6,151,2,"_babelRuntimeHelpersSlicedToArray"],[20,39,151,2],[20,42,151,2,"require"],[20,49,151,2],[20,50,151,2,"_dependencyMap"],[20,64,151,2],[21,2,151,2],[21,6,151,2,"_slicedToArray"],[21,20,151,2],[21,23,151,2,"_interopDefault"],[21,38,151,2],[21,39,151,2,"_babelRuntimeHelpersSlicedToArray"],[21,72,151,2],[22,2,8,0],[22,6,8,0,"_react"],[22,12,8,0],[22,15,8,0,"require"],[22,22,8,0],[22,23,8,0,"_dependencyMap"],[22,37,8,0],[23,2,9,0],[23,6,9,0,"_reactNativeAsyncStorageAsyncStorage"],[23,42,9,0],[23,45,9,0,"require"],[23,52,9,0],[23,53,9,0,"_dependencyMap"],[23,67,9,0],[24,2,9,0],[24,6,9,0,"AsyncStorage"],[24,18,9,0],[24,21,9,0,"_interopDefault"],[24,36,9,0],[24,37,9,0,"_reactNativeAsyncStorageAsyncStorage"],[24,73,9,0],[25,2,1,0],[26,0,2,0],[27,0,3,0],[28,0,4,0],[29,0,5,0],[30,0,6,0],[32,2,11,0],[32,6,11,6,"API_BASE"],[32,14,11,14],[32,17,11,53],[32,40,11,76],[34,2,13,0],[36,2,44,0],[37,0,45,0],[38,0,46,0],[39,0,47,0],[40,0,48,0],[41,0,49,0],[42,0,50,0],[43,0,51,0],[44,0,52,0],[45,0,53,0],[46,0,54,0],[47,0,55,0],[48,0,56,0],[49,0,57,0],[50,0,58,0],[51,0,59,0],[52,0,60,0],[53,0,61,0],[54,0,62,0],[55,0,63,0],[56,0,64,0],[57,0,65,0],[58,0,66,0],[59,2,67,7],[59,6,67,13,"useWaterBudget"],[59,20,67,27],[59,23,67,30,"useWaterBudget"],[59,24,67,30],[59,29,67,58],[60,4,68,2],[60,8,68,2,"_useState"],[60,17,68,2],[60,20,68,32],[60,24,68,32,"useState"],[60,30,68,40],[60,31,68,40,"useState"],[60,39,68,40],[60,41,68,41],[60,46,68,46],[60,47,68,47],[61,6,68,47,"_useState2"],[61,16,68,47],[61,23,68,47,"_slicedToArray"],[61,37,68,47],[61,38,68,47,"default"],[61,45,68,47],[61,47,68,47,"_useState"],[61,56,68,47],[62,6,68,9,"loading"],[62,13,68,16],[62,16,68,16,"_useState2"],[62,26,68,16],[63,6,68,18,"setLoading"],[63,16,68,28],[63,19,68,28,"_useState2"],[63,29,68,28],[64,4,69,2],[64,8,69,2,"_useState3"],[64,18,69,2],[64,21,69,28],[64,25,69,28,"useState"],[64,31,69,36],[64,32,69,36,"useState"],[64,40,69,36],[64,42,69,52],[64,46,69,56],[64,47,69,57],[65,6,69,57,"_useState4"],[65,16,69,57],[65,23,69,57,"_slicedToArray"],[65,37,69,57],[65,38,69,57,"default"],[65,45,69,57],[65,47,69,57,"_useState3"],[65,57,69,57],[66,6,69,9,"error"],[66,11,69,14],[66,14,69,14,"_useState4"],[66,24,69,14],[67,6,69,16,"setError"],[67,14,69,24],[67,17,69,24,"_useState4"],[67,27,69,24],[68,4,70,2],[68,8,70,2,"_useState5"],[68,18,70,2],[68,21,70,30],[68,25,70,30,"useState"],[68,31,70,38],[68,32,70,38,"useState"],[68,40,70,38],[68,42,70,67],[68,46,70,71],[68,47,70,72],[69,6,70,72,"_useState6"],[69,16,70,72],[69,23,70,72,"_slicedToArray"],[69,37,70,72],[69,38,70,72,"default"],[69,45,70,72],[69,47,70,72,"_useState5"],[69,57,70,72],[70,6,70,9,"result"],[70,12,70,15],[70,15,70,15,"_useState6"],[70,25,70,15],[71,6,70,17,"setResult"],[71,15,70,26],[71,18,70,26,"_useState6"],[71,28,70,26],[72,4,72,2],[72,8,72,8,"estimate"],[72,16,72,16],[73,6,72,16],[73,10,72,16,"_ref"],[73,14,72,16],[73,21,72,16,"_asyncToGenerator"],[73,38,72,16],[73,39,72,16,"default"],[73,46,72,16],[73,48,72,19],[73,59,73,4,"request"],[73,66,73,31],[73,68,74,44],[74,8,75,4,"setLoading"],[74,18,75,14],[74,19,75,15],[74,23,75,19],[74,24,75,20],[75,8,76,4,"setError"],[75,16,76,12],[75,17,76,13],[75,21,76,17],[75,22,76,18],[76,8,78,4],[76,12,78,8],[77,10,79,6],[78,10,80,6],[78,14,80,10,"subscriptionId"],[78,28,80,24],[78,31,80,27,"request"],[78,38,80,34],[78,39,80,35,"subscription_id"],[78,54,80,50],[79,10,81,6],[79,14,81,10],[79,15,81,11,"subscriptionId"],[79,29,81,25],[79,31,81,27],[80,12,82,8],[80,16,82,12],[81,14,83,10,"subscriptionId"],[81,28,83,24],[81,37,83,33,"AsyncStorage"],[81,49,83,45],[81,50,83,45,"default"],[81,57,83,45],[81,58,83,46,"getItem"],[81,65,83,53],[81,66,83,54],[81,83,83,71],[81,84,83,72],[82,12,84,8],[82,13,84,9],[82,14,84,10],[82,21,84,17,"e"],[82,22,84,18],[82,24,84,20],[83,14,85,10,"console"],[83,21,85,17],[83,22,85,18,"log"],[83,25,85,21],[83,26,85,22],[83,75,85,71],[83,76,85,72],[84,12,86,8],[85,10,87,6],[87,10,89,6],[88,10,90,6],[88,14,90,12,"response"],[88,22,90,20],[88,31,90,29,"fetch"],[88,36,90,34],[88,37,90,35],[88,40,90,38,"API_BASE"],[88,48,90,46],[88,71,90,69],[88,73,90,71],[89,12,91,8,"method"],[89,18,91,14],[89,20,91,16],[89,26,91,22],[90,12,92,8,"headers"],[90,19,92,15],[90,21,92,17],[91,14,93,10],[91,28,93,24],[91,30,93,26],[92,12,94,8],[92,13,94,9],[93,12,95,8,"body"],[93,16,95,12],[93,18,95,14,"JSON"],[93,22,95,18],[93,23,95,19,"stringify"],[93,32,95,28],[93,33,95,29],[94,14,96,10],[94,17,96,13,"request"],[94,24,96,20],[95,14,97,10,"subscription_id"],[95,29,97,25],[95,31,97,27,"subscriptionId"],[96,12,98,8],[96,13,98,9],[97,10,99,6],[97,11,99,7],[97,12,99,8],[98,10,101,6],[98,14,101,10],[98,15,101,11,"response"],[98,23,101,19],[98,24,101,20,"ok"],[98,26,101,22],[98,28,101,24],[99,12,102,8],[100,12,103,8],[100,16,103,12,"errorDetail"],[100,27,103,23],[100,30,103,26],[100,38,103,34,"response"],[100,46,103,42],[100,47,103,43,"status"],[100,53,103,49],[100,55,103,51],[101,12,104,8],[101,16,104,12],[102,14,105,10],[102,18,105,16,"errorData"],[102,27,105,25],[102,36,105,34,"response"],[102,44,105,42],[102,45,105,43,"json"],[102,49,105,47],[102,50,105,48],[102,51,105,49],[103,14,106,10],[103,18,106,14,"errorData"],[103,27,106,23],[103,28,106,24,"detail"],[103,34,106,30],[103,36,106,32],[104,16,107,12,"errorDetail"],[104,27,107,23],[104,30,107,26,"errorData"],[104,39,107,35],[104,40,107,36,"detail"],[104,46,107,42],[105,14,108,10],[106,12,109,8],[106,13,109,9],[106,14,109,10],[106,20,109,16],[107,14,110,10],[108,14,111,10,"errorDetail"],[108,25,111,21],[108,28,111,24,"response"],[108,36,111,32],[108,37,111,33,"statusText"],[108,47,111,43],[108,51,111,47],[108,59,111,55,"response"],[108,67,111,63],[108,68,111,64,"status"],[108,74,111,70],[108,76,111,72],[109,12,112,8],[110,12,113,8],[110,18,113,14],[110,22,113,18,"Error"],[110,27,113,23],[110,28,113,24,"errorDetail"],[110,39,113,35],[110,40,113,36],[111,10,114,6],[112,10,116,6],[112,14,116,12,"data"],[112,18,116,37],[112,27,116,46,"response"],[112,35,116,54],[112,36,116,55,"json"],[112,40,116,59],[112,41,116,60],[112,42,116,61],[114,10,118,6],[115,10,119,6],[115,14,119,10,"data"],[115,18,119,14],[115,19,119,15,"is_premium_locked"],[115,36,119,32],[115,40,119,36,"data"],[115,44,119,40],[115,45,119,41,"premium_message"],[115,60,119,56],[115,62,119,58],[116,12,120,8,"setError"],[116,20,120,16],[116,21,120,17,"data"],[116,25,120,21],[116,26,120,22,"premium_message"],[116,41,120,37],[116,42,120,38],[117,12,121,8,"setResult"],[117,21,121,17],[117,22,121,18,"data"],[117,26,121,22],[117,27,121,23],[118,12,122,8,"setLoading"],[118,22,122,18],[118,23,122,19],[118,28,122,24],[118,29,122,25],[119,12,123,8],[119,19,123,15,"data"],[119,23,123,19],[120,10,124,6],[122,10,126,6],[123,10,127,6,"setResult"],[123,19,127,15],[123,20,127,16,"data"],[123,24,127,20],[123,25,127,21],[124,10,128,6,"setLoading"],[124,20,128,16],[124,21,128,17],[124,26,128,22],[124,27,128,23],[125,10,129,6],[125,17,129,13,"data"],[125,21,129,17],[126,8,130,4],[126,9,130,5],[126,10,130,6],[126,17,130,13,"err"],[126,20,130,16],[126,22,130,18],[127,10,131,6],[127,14,131,12,"errorMessage"],[127,26,131,24],[127,29,131,27,"err"],[127,32,131,30],[127,44,131,42,"Error"],[127,49,131,47],[127,52,131,50,"err"],[127,55,131,53],[127,56,131,54,"message"],[127,63,131,61],[127,66,131,64],[127,81,131,79],[128,10,132,6,"console"],[128,17,132,13],[128,18,132,14,"error"],[128,23,132,19],[128,24,132,20],[128,50,132,46],[128,52,132,48,"errorMessage"],[128,64,132,60],[128,65,132,61],[129,10,133,6,"setError"],[129,18,133,14],[129,19,133,15,"errorMessage"],[129,31,133,27],[129,32,133,28],[130,10,134,6,"setLoading"],[130,20,134,16],[130,21,134,17],[130,26,134,22],[130,27,134,23],[131,10,135,6],[131,17,135,13],[131,21,135,17],[132,8,136,4],[133,6,137,2],[133,7,137,3],[134,6,137,3],[134,22,72,8,"estimate"],[134,30,72,16,"estimate"],[134,31,72,16,"_x"],[134,33,72,16],[135,8,72,16],[135,15,72,16,"_ref"],[135,19,72,16],[135,20,72,16,"apply"],[135,25,72,16],[135,32,72,16,"arguments"],[135,41,72,16],[136,6,72,16],[137,4,72,16],[137,7,137,3],[138,4,139,2],[138,8,139,8,"clearResult"],[138,19,139,19],[138,22,139,22,"clearResult"],[138,23,139,22],[138,28,139,28],[139,6,140,4,"setResult"],[139,15,140,13],[139,16,140,14],[139,20,140,18],[139,21,140,19],[140,6,141,4,"setError"],[140,14,141,12],[140,15,141,13],[140,19,141,17],[140,20,141,18],[141,4,142,2],[141,5,142,3],[142,4,144,2],[142,11,144,9],[143,6,145,4,"estimate"],[143,14,145,12],[144,6,146,4,"loading"],[144,13,146,11],[145,6,147,4,"error"],[145,11,147,9],[146,6,148,4,"result"],[146,12,148,10],[147,6,149,4,"clearResult"],[148,4,150,2],[148,5,150,3],[149,2,151,0],[149,3,151,1],[150,0,151,2],[150,3]],"functionMap":{"names":["<global>","useWaterBudget","estimate","clearResult"],"mappings":"AAA;8BCkE;mBCK;GDiE;sBEE;GFG;CDS"},"hasCjsExports":false},"type":"js/module"}]}