{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":225},"end":{"line":8,"column":33,"index":258}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":259},"end":{"line":9,"column":69,"index":328}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useTerrainShade\", {\n    enumerable: true,\n    get: function () {\n      return useTerrainShade;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1]);\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2]);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3]);\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  /**\n   * useTerrainShade - React Hook for Terrain Shade Estimation\n   *\n   * Custom hook for calling the solar path and shade blocking API endpoints.\n   * Calculates sunlight availability and shade factor for camping locations.\n   */\n\n  var API_BASE = 'http://localhost:8000';\n\n  // Type-safe interfaces matching API models\n\n  /**\n   * Hook for terrain shade and solar path estimation\n   *\n   * Usage:\n   * ```typescript\n   * const { estimate, loading, error, result } = useTerrainShade();\n   *\n   * await estimate({\n   *   latitude: 40.7128,\n   *   longitude: -105.1084,\n   *   date: '2024-06-21',\n   *   tree_canopy_pct: 60,\n   *   horizon_obstruction_deg: 15,\n   * });\n   *\n   * if (result?.is_premium_locked) {\n   * // Handle premium response\n   * } else if (result?.sun_path_slots) {\n   *   // Display solar path and shade factor\n   * }\n   * ```\n   */\n  var useTerrainShade = () => {\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n    var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n    var _useState5 = (0, _react.useState)(null),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      result = _useState6[0],\n      setResult = _useState6[1];\n    var estimate = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (request) {\n        setLoading(true);\n        setError(null);\n        try {\n          // Retrieve subscription ID from AsyncStorage if not provided\n          var subscriptionId = request.subscription_id;\n          if (!subscriptionId) {\n            try {\n              subscriptionId = yield AsyncStorage.default.getItem('subscription_id');\n            } catch (e) {\n              console.log('Could not retrieve subscription ID from storage');\n            }\n          }\n\n          // Call API endpoint for solar path\n          var response = yield fetch(`${API_BASE}/api/pro/terrain/sun-path`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              ...request,\n              subscription_id: subscriptionId\n            })\n          });\n          if (!response.ok) {\n            // Try to parse error detail from response\n            var errorDetail = `HTTP ${response.status}`;\n            try {\n              var errorData = yield response.json();\n              if (errorData.detail) {\n                errorDetail = errorData.detail;\n              }\n            } catch {\n              // If response isn't JSON, use status message\n              errorDetail = response.statusText || `HTTP ${response.status}`;\n            }\n            throw new Error(errorDetail);\n          }\n          var data = yield response.json();\n\n          // Detect premium-locked response\n          if (data.is_premium_locked && data.premium_message) {\n            setError(data.premium_message);\n            setResult(data);\n            setLoading(false);\n            return data;\n          }\n\n          // Success\n          setResult(data);\n          setLoading(false);\n          return data;\n        } catch (err) {\n          var errorMessage = err instanceof Error ? err.message : 'Unknown error';\n          console.error('Error in useTerrainShade:', errorMessage);\n          setError(errorMessage);\n          setLoading(false);\n          return null;\n        }\n      });\n      return function estimate(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var clearResult = () => {\n      setResult(null);\n      setError(null);\n    };\n    return {\n      estimate,\n      loading,\n      error,\n      result,\n      clearResult\n    };\n  };\n});","lineCount":149,"map":[[12,2,69,0,"Object"],[12,8,69,0],[12,9,69,0,"defineProperty"],[12,23,69,0],[12,24,69,0,"exports"],[12,31,69,0],[13,4,69,0,"enumerable"],[13,14,69,0],[14,4,69,0,"get"],[14,7,69,0],[14,18,69,0,"get"],[14,19,69,0],[15,6,69,0],[15,13,69,0,"useTerrainShade"],[15,28,69,0],[16,4,69,0],[17,2,69,0],[18,2,153,2],[18,6,153,2,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,153,2],[18,45,153,2,"require"],[18,52,153,2],[18,53,153,2,"_dependencyMap"],[18,67,153,2],[19,2,153,2],[19,6,153,2,"_asyncToGenerator"],[19,23,153,2],[19,26,153,2,"_interopDefault"],[19,41,153,2],[19,42,153,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,153,2],[20,2,153,2],[20,6,153,2,"_babelRuntimeHelpersSlicedToArray"],[20,39,153,2],[20,42,153,2,"require"],[20,49,153,2],[20,50,153,2,"_dependencyMap"],[20,64,153,2],[21,2,153,2],[21,6,153,2,"_slicedToArray"],[21,20,153,2],[21,23,153,2,"_interopDefault"],[21,38,153,2],[21,39,153,2,"_babelRuntimeHelpersSlicedToArray"],[21,72,153,2],[22,2,8,0],[22,6,8,0,"_react"],[22,12,8,0],[22,15,8,0,"require"],[22,22,8,0],[22,23,8,0,"_dependencyMap"],[22,37,8,0],[23,2,9,0],[23,6,9,0,"_reactNativeAsyncStorageAsyncStorage"],[23,42,9,0],[23,45,9,0,"require"],[23,52,9,0],[23,53,9,0,"_dependencyMap"],[23,67,9,0],[24,2,9,0],[24,6,9,0,"AsyncStorage"],[24,18,9,0],[24,21,9,0,"_interopDefault"],[24,36,9,0],[24,37,9,0,"_reactNativeAsyncStorageAsyncStorage"],[24,73,9,0],[25,2,1,0],[26,0,2,0],[27,0,3,0],[28,0,4,0],[29,0,5,0],[30,0,6,0],[32,2,11,0],[32,6,11,6,"API_BASE"],[32,14,11,14],[32,17,11,53],[32,40,11,76],[34,2,13,0],[36,2,47,0],[37,0,48,0],[38,0,49,0],[39,0,50,0],[40,0,51,0],[41,0,52,0],[42,0,53,0],[43,0,54,0],[44,0,55,0],[45,0,56,0],[46,0,57,0],[47,0,58,0],[48,0,59,0],[49,0,60,0],[50,0,61,0],[51,0,62,0],[52,0,63,0],[53,0,64,0],[54,0,65,0],[55,0,66,0],[56,0,67,0],[57,0,68,0],[58,2,69,7],[58,6,69,13,"useTerrainShade"],[58,21,69,28],[58,24,69,31,"useTerrainShade"],[58,25,69,31],[58,30,69,60],[59,4,70,2],[59,8,70,2,"_useState"],[59,17,70,2],[59,20,70,32],[59,24,70,32,"useState"],[59,30,70,40],[59,31,70,40,"useState"],[59,39,70,40],[59,41,70,41],[59,46,70,46],[59,47,70,47],[60,6,70,47,"_useState2"],[60,16,70,47],[60,23,70,47,"_slicedToArray"],[60,37,70,47],[60,38,70,47,"default"],[60,45,70,47],[60,47,70,47,"_useState"],[60,56,70,47],[61,6,70,9,"loading"],[61,13,70,16],[61,16,70,16,"_useState2"],[61,26,70,16],[62,6,70,18,"setLoading"],[62,16,70,28],[62,19,70,28,"_useState2"],[62,29,70,28],[63,4,71,2],[63,8,71,2,"_useState3"],[63,18,71,2],[63,21,71,28],[63,25,71,28,"useState"],[63,31,71,36],[63,32,71,36,"useState"],[63,40,71,36],[63,42,71,52],[63,46,71,56],[63,47,71,57],[64,6,71,57,"_useState4"],[64,16,71,57],[64,23,71,57,"_slicedToArray"],[64,37,71,57],[64,38,71,57,"default"],[64,45,71,57],[64,47,71,57,"_useState3"],[64,57,71,57],[65,6,71,9,"error"],[65,11,71,14],[65,14,71,14,"_useState4"],[65,24,71,14],[66,6,71,16,"setError"],[66,14,71,24],[66,17,71,24,"_useState4"],[66,27,71,24],[67,4,72,2],[67,8,72,2,"_useState5"],[67,18,72,2],[67,21,72,30],[67,25,72,30,"useState"],[67,31,72,38],[67,32,72,38,"useState"],[67,40,72,38],[67,42,72,68],[67,46,72,72],[67,47,72,73],[68,6,72,73,"_useState6"],[68,16,72,73],[68,23,72,73,"_slicedToArray"],[68,37,72,73],[68,38,72,73,"default"],[68,45,72,73],[68,47,72,73,"_useState5"],[68,57,72,73],[69,6,72,9,"result"],[69,12,72,15],[69,15,72,15,"_useState6"],[69,25,72,15],[70,6,72,17,"setResult"],[70,15,72,26],[70,18,72,26,"_useState6"],[70,28,72,26],[71,4,74,2],[71,8,74,8,"estimate"],[71,16,74,16],[72,6,74,16],[72,10,74,16,"_ref"],[72,14,74,16],[72,21,74,16,"_asyncToGenerator"],[72,38,74,16],[72,39,74,16,"default"],[72,46,74,16],[72,48,74,19],[72,59,75,4,"request"],[72,66,75,32],[72,68,76,45],[73,8,77,4,"setLoading"],[73,18,77,14],[73,19,77,15],[73,23,77,19],[73,24,77,20],[74,8,78,4,"setError"],[74,16,78,12],[74,17,78,13],[74,21,78,17],[74,22,78,18],[75,8,80,4],[75,12,80,8],[76,10,81,6],[77,10,82,6],[77,14,82,10,"subscriptionId"],[77,28,82,24],[77,31,82,27,"request"],[77,38,82,34],[77,39,82,35,"subscription_id"],[77,54,82,50],[78,10,83,6],[78,14,83,10],[78,15,83,11,"subscriptionId"],[78,29,83,25],[78,31,83,27],[79,12,84,8],[79,16,84,12],[80,14,85,10,"subscriptionId"],[80,28,85,24],[80,37,85,33,"AsyncStorage"],[80,49,85,45],[80,50,85,45,"default"],[80,57,85,45],[80,58,85,46,"getItem"],[80,65,85,53],[80,66,85,54],[80,83,85,71],[80,84,85,72],[81,12,86,8],[81,13,86,9],[81,14,86,10],[81,21,86,17,"e"],[81,22,86,18],[81,24,86,20],[82,14,87,10,"console"],[82,21,87,17],[82,22,87,18,"log"],[82,25,87,21],[82,26,87,22],[82,75,87,71],[82,76,87,72],[83,12,88,8],[84,10,89,6],[86,10,91,6],[87,10,92,6],[87,14,92,12,"response"],[87,22,92,20],[87,31,92,29,"fetch"],[87,36,92,34],[87,37,92,35],[87,40,92,38,"API_BASE"],[87,48,92,46],[87,75,92,73],[87,77,92,75],[88,12,93,8,"method"],[88,18,93,14],[88,20,93,16],[88,26,93,22],[89,12,94,8,"headers"],[89,19,94,15],[89,21,94,17],[90,14,95,10],[90,28,95,24],[90,30,95,26],[91,12,96,8],[91,13,96,9],[92,12,97,8,"body"],[92,16,97,12],[92,18,97,14,"JSON"],[92,22,97,18],[92,23,97,19,"stringify"],[92,32,97,28],[92,33,97,29],[93,14,98,10],[93,17,98,13,"request"],[93,24,98,20],[94,14,99,10,"subscription_id"],[94,29,99,25],[94,31,99,27,"subscriptionId"],[95,12,100,8],[95,13,100,9],[96,10,101,6],[96,11,101,7],[96,12,101,8],[97,10,103,6],[97,14,103,10],[97,15,103,11,"response"],[97,23,103,19],[97,24,103,20,"ok"],[97,26,103,22],[97,28,103,24],[98,12,104,8],[99,12,105,8],[99,16,105,12,"errorDetail"],[99,27,105,23],[99,30,105,26],[99,38,105,34,"response"],[99,46,105,42],[99,47,105,43,"status"],[99,53,105,49],[99,55,105,51],[100,12,106,8],[100,16,106,12],[101,14,107,10],[101,18,107,16,"errorData"],[101,27,107,25],[101,36,107,34,"response"],[101,44,107,42],[101,45,107,43,"json"],[101,49,107,47],[101,50,107,48],[101,51,107,49],[102,14,108,10],[102,18,108,14,"errorData"],[102,27,108,23],[102,28,108,24,"detail"],[102,34,108,30],[102,36,108,32],[103,16,109,12,"errorDetail"],[103,27,109,23],[103,30,109,26,"errorData"],[103,39,109,35],[103,40,109,36,"detail"],[103,46,109,42],[104,14,110,10],[105,12,111,8],[105,13,111,9],[105,14,111,10],[105,20,111,16],[106,14,112,10],[107,14,113,10,"errorDetail"],[107,25,113,21],[107,28,113,24,"response"],[107,36,113,32],[107,37,113,33,"statusText"],[107,47,113,43],[107,51,113,47],[107,59,113,55,"response"],[107,67,113,63],[107,68,113,64,"status"],[107,74,113,70],[107,76,113,72],[108,12,114,8],[109,12,115,8],[109,18,115,14],[109,22,115,18,"Error"],[109,27,115,23],[109,28,115,24,"errorDetail"],[109,39,115,35],[109,40,115,36],[110,10,116,6],[111,10,118,6],[111,14,118,12,"data"],[111,18,118,38],[111,27,118,47,"response"],[111,35,118,55],[111,36,118,56,"json"],[111,40,118,60],[111,41,118,61],[111,42,118,62],[113,10,120,6],[114,10,121,6],[114,14,121,10,"data"],[114,18,121,14],[114,19,121,15,"is_premium_locked"],[114,36,121,32],[114,40,121,36,"data"],[114,44,121,40],[114,45,121,41,"premium_message"],[114,60,121,56],[114,62,121,58],[115,12,122,8,"setError"],[115,20,122,16],[115,21,122,17,"data"],[115,25,122,21],[115,26,122,22,"premium_message"],[115,41,122,37],[115,42,122,38],[116,12,123,8,"setResult"],[116,21,123,17],[116,22,123,18,"data"],[116,26,123,22],[116,27,123,23],[117,12,124,8,"setLoading"],[117,22,124,18],[117,23,124,19],[117,28,124,24],[117,29,124,25],[118,12,125,8],[118,19,125,15,"data"],[118,23,125,19],[119,10,126,6],[121,10,128,6],[122,10,129,6,"setResult"],[122,19,129,15],[122,20,129,16,"data"],[122,24,129,20],[122,25,129,21],[123,10,130,6,"setLoading"],[123,20,130,16],[123,21,130,17],[123,26,130,22],[123,27,130,23],[124,10,131,6],[124,17,131,13,"data"],[124,21,131,17],[125,8,132,4],[125,9,132,5],[125,10,132,6],[125,17,132,13,"err"],[125,20,132,16],[125,22,132,18],[126,10,133,6],[126,14,133,12,"errorMessage"],[126,26,133,24],[126,29,133,27,"err"],[126,32,133,30],[126,44,133,42,"Error"],[126,49,133,47],[126,52,133,50,"err"],[126,55,133,53],[126,56,133,54,"message"],[126,63,133,61],[126,66,133,64],[126,81,133,79],[127,10,134,6,"console"],[127,17,134,13],[127,18,134,14,"error"],[127,23,134,19],[127,24,134,20],[127,51,134,47],[127,53,134,49,"errorMessage"],[127,65,134,61],[127,66,134,62],[128,10,135,6,"setError"],[128,18,135,14],[128,19,135,15,"errorMessage"],[128,31,135,27],[128,32,135,28],[129,10,136,6,"setLoading"],[129,20,136,16],[129,21,136,17],[129,26,136,22],[129,27,136,23],[130,10,137,6],[130,17,137,13],[130,21,137,17],[131,8,138,4],[132,6,139,2],[132,7,139,3],[133,6,139,3],[133,22,74,8,"estimate"],[133,30,74,16,"estimate"],[133,31,74,16,"_x"],[133,33,74,16],[134,8,74,16],[134,15,74,16,"_ref"],[134,19,74,16],[134,20,74,16,"apply"],[134,25,74,16],[134,32,74,16,"arguments"],[134,41,74,16],[135,6,74,16],[136,4,74,16],[136,7,139,3],[137,4,141,2],[137,8,141,8,"clearResult"],[137,19,141,19],[137,22,141,22,"clearResult"],[137,23,141,22],[137,28,141,28],[138,6,142,4,"setResult"],[138,15,142,13],[138,16,142,14],[138,20,142,18],[138,21,142,19],[139,6,143,4,"setError"],[139,14,143,12],[139,15,143,13],[139,19,143,17],[139,20,143,18],[140,4,144,2],[140,5,144,3],[141,4,146,2],[141,11,146,9],[142,6,147,4,"estimate"],[142,14,147,12],[143,6,148,4,"loading"],[143,13,148,11],[144,6,149,4,"error"],[144,11,149,9],[145,6,150,4,"result"],[145,12,150,10],[146,6,151,4,"clearResult"],[147,4,152,2],[147,5,152,3],[148,2,153,0],[148,3,153,1],[149,0,153,2],[149,3]],"functionMap":{"names":["<global>","useTerrainShade","estimate","clearResult"],"mappings":"AAA;+BCoE;mBCK;GDiE;sBEE;GFG;CDS"},"hasCjsExports":false},"type":"js/module"}]}