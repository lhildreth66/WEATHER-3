{"dependencies":[{"name":"../Parser.cjs","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":3,"column":14,"index":57},"end":{"line":3,"column":38,"index":81}}],"key":"UV8HqqRg9EtNKtdF2MZZKNC/nnI="}},{"name":"../utils.cjs","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":5,"column":13,"index":97},"end":{"line":5,"column":36,"index":120}}],"key":"JovButJFq3RLkHn+4yNfAxsXc/4="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  exports.YearParser = void 0;\n  var _Parser = require(_dependencyMap[0], \"../Parser.cjs\");\n  var _utils = require(_dependencyMap[1], \"../utils.cjs\");\n\n  // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_Patterns\n  // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n  // |----------|-------|----|-------|-------|-------|\n  // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n  // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n  // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n  // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n  // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n  class YearParser extends _Parser.Parser {\n    priority = 130;\n    incompatibleTokens = [\"Y\", \"R\", \"u\", \"w\", \"I\", \"i\", \"e\", \"c\", \"t\", \"T\"];\n    parse(dateString, token, match) {\n      const valueCallback = year => ({\n        year,\n        isTwoDigitYear: token === \"yy\"\n      });\n      switch (token) {\n        case \"y\":\n          return (0, _utils.mapValue)((0, _utils.parseNDigits)(4, dateString), valueCallback);\n        case \"yo\":\n          return (0, _utils.mapValue)(match.ordinalNumber(dateString, {\n            unit: \"year\"\n          }), valueCallback);\n        default:\n          return (0, _utils.mapValue)((0, _utils.parseNDigits)(token.length, dateString), valueCallback);\n      }\n    }\n    validate(_date, value) {\n      return value.isTwoDigitYear || value.year > 0;\n    }\n    set(date, flags, value) {\n      const currentYear = date.getFullYear();\n      if (value.isTwoDigitYear) {\n        const normalizedTwoDigitYear = (0, _utils.normalizeTwoDigitYear)(value.year, currentYear);\n        date.setFullYear(normalizedTwoDigitYear, 0, 1);\n        date.setHours(0, 0, 0, 0);\n        return date;\n      }\n      const year = !(\"era\" in flags) || flags.era === 1 ? value.year : 1 - value.year;\n      date.setFullYear(year, 0, 1);\n      date.setHours(0, 0, 0, 0);\n      return date;\n    }\n  }\n  exports.YearParser = YearParser;\n});","lineCount":53,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"exports"],[4,9,2,7],[4,10,2,8,"YearParser"],[4,20,2,18],[4,23,2,21],[4,28,2,26],[4,29,2,27],[5,2,3,0],[5,6,3,4,"_Parser"],[5,13,3,11],[5,16,3,14,"require"],[5,23,3,21],[5,24,3,21,"_dependencyMap"],[5,38,3,21],[5,58,3,37],[5,59,3,38],[6,2,5,0],[6,6,5,4,"_utils"],[6,12,5,10],[6,15,5,13,"require"],[6,22,5,20],[6,23,5,20,"_dependencyMap"],[6,37,5,20],[6,56,5,35],[6,57,5,36],[8,2,7,0],[9,2,8,0],[10,2,9,0],[11,2,10,0],[12,2,11,0],[13,2,12,0],[14,2,13,0],[15,2,14,0],[16,2,15,0],[16,8,15,6,"YearParser"],[16,18,15,16],[16,27,15,25,"_Parser"],[16,34,15,32],[16,35,15,33,"Parser"],[16,41,15,39],[16,42,15,40],[17,4,16,2,"priority"],[17,12,16,10],[17,15,16,13],[17,18,16,16],[18,4,17,2,"incompatibleTokens"],[18,22,17,20],[18,25,17,23],[18,26,17,24],[18,29,17,27],[18,31,17,29],[18,34,17,32],[18,36,17,34],[18,39,17,37],[18,41,17,39],[18,44,17,42],[18,46,17,44],[18,49,17,47],[18,51,17,49],[18,54,17,52],[18,56,17,54],[18,59,17,57],[18,61,17,59],[18,64,17,62],[18,66,17,64],[18,69,17,67],[18,71,17,69],[18,74,17,72],[18,75,17,73],[19,4,19,2,"parse"],[19,9,19,7,"parse"],[19,10,19,8,"dateString"],[19,20,19,18],[19,22,19,20,"token"],[19,27,19,25],[19,29,19,27,"match"],[19,34,19,32],[19,36,19,34],[20,6,20,4],[20,12,20,10,"valueCallback"],[20,25,20,23],[20,28,20,27,"year"],[20,32,20,31],[20,37,20,37],[21,8,21,6,"year"],[21,12,21,10],[22,8,22,6,"isTwoDigitYear"],[22,22,22,20],[22,24,22,22,"token"],[22,29,22,27],[22,34,22,32],[23,6,23,4],[23,7,23,5],[23,8,23,6],[24,6,25,4],[24,14,25,12,"token"],[24,19,25,17],[25,8,26,6],[25,13,26,11],[25,16,26,14],[26,10,27,8],[26,17,27,15],[26,18,27,16],[26,19,27,17],[26,21,27,19,"_utils"],[26,27,27,25],[26,28,27,26,"mapValue"],[26,36,27,34],[26,38,28,10],[26,39,28,11],[26,40,28,12],[26,42,28,14,"_utils"],[26,48,28,20],[26,49,28,21,"parseNDigits"],[26,61,28,33],[26,63,28,35],[26,64,28,36],[26,66,28,38,"dateString"],[26,76,28,48],[26,77,28,49],[26,79,29,10,"valueCallback"],[26,92,30,8],[26,93,30,9],[27,8,31,6],[27,13,31,11],[27,17,31,15],[28,10,32,8],[28,17,32,15],[28,18,32,16],[28,19,32,17],[28,21,32,19,"_utils"],[28,27,32,25],[28,28,32,26,"mapValue"],[28,36,32,34],[28,38,33,10,"match"],[28,43,33,15],[28,44,33,16,"ordinalNumber"],[28,57,33,29],[28,58,33,30,"dateString"],[28,68,33,40],[28,70,33,42],[29,12,34,12,"unit"],[29,16,34,16],[29,18,34,18],[30,10,35,10],[30,11,35,11],[30,12,35,12],[30,14,36,10,"valueCallback"],[30,27,37,8],[30,28,37,9],[31,8,38,6],[32,10,39,8],[32,17,39,15],[32,18,39,16],[32,19,39,17],[32,21,39,19,"_utils"],[32,27,39,25],[32,28,39,26,"mapValue"],[32,36,39,34],[32,38,40,10],[32,39,40,11],[32,40,40,12],[32,42,40,14,"_utils"],[32,48,40,20],[32,49,40,21,"parseNDigits"],[32,61,40,33],[32,63,40,35,"token"],[32,68,40,40],[32,69,40,41,"length"],[32,75,40,47],[32,77,40,49,"dateString"],[32,87,40,59],[32,88,40,60],[32,90,41,10,"valueCallback"],[32,103,42,8],[32,104,42,9],[33,6,43,4],[34,4,44,2],[35,4,46,2,"validate"],[35,12,46,10,"validate"],[35,13,46,11,"_date"],[35,18,46,16],[35,20,46,18,"value"],[35,25,46,23],[35,27,46,25],[36,6,47,4],[36,13,47,11,"value"],[36,18,47,16],[36,19,47,17,"isTwoDigitYear"],[36,33,47,31],[36,37,47,35,"value"],[36,42,47,40],[36,43,47,41,"year"],[36,47,47,45],[36,50,47,48],[36,51,47,49],[37,4,48,2],[38,4,50,2,"set"],[38,7,50,5,"set"],[38,8,50,6,"date"],[38,12,50,10],[38,14,50,12,"flags"],[38,19,50,17],[38,21,50,19,"value"],[38,26,50,24],[38,28,50,26],[39,6,51,4],[39,12,51,10,"currentYear"],[39,23,51,21],[39,26,51,24,"date"],[39,30,51,28],[39,31,51,29,"getFullYear"],[39,42,51,40],[39,43,51,41],[39,44,51,42],[40,6,53,4],[40,10,53,8,"value"],[40,15,53,13],[40,16,53,14,"isTwoDigitYear"],[40,30,53,28],[40,32,53,30],[41,8,54,6],[41,14,54,12,"normalizedTwoDigitYear"],[41,36,54,34],[41,39,54,37],[41,40,54,38],[41,41,54,39],[41,43,54,41,"_utils"],[41,49,54,47],[41,50,54,48,"normalizeTwoDigitYear"],[41,71,54,69],[41,73,55,8,"value"],[41,78,55,13],[41,79,55,14,"year"],[41,83,55,18],[41,85,56,8,"currentYear"],[41,96,57,6],[41,97,57,7],[42,8,58,6,"date"],[42,12,58,10],[42,13,58,11,"setFullYear"],[42,24,58,22],[42,25,58,23,"normalizedTwoDigitYear"],[42,47,58,45],[42,49,58,47],[42,50,58,48],[42,52,58,50],[42,53,58,51],[42,54,58,52],[43,8,59,6,"date"],[43,12,59,10],[43,13,59,11,"setHours"],[43,21,59,19],[43,22,59,20],[43,23,59,21],[43,25,59,23],[43,26,59,24],[43,28,59,26],[43,29,59,27],[43,31,59,29],[43,32,59,30],[43,33,59,31],[44,8,60,6],[44,15,60,13,"date"],[44,19,60,17],[45,6,61,4],[46,6,63,4],[46,12,63,10,"year"],[46,16,63,14],[46,19,64,6],[46,21,64,8],[46,26,64,13],[46,30,64,17,"flags"],[46,35,64,22],[46,36,64,23],[46,40,64,27,"flags"],[46,45,64,32],[46,46,64,33,"era"],[46,49,64,36],[46,54,64,41],[46,55,64,42],[46,58,64,45,"value"],[46,63,64,50],[46,64,64,51,"year"],[46,68,64,55],[46,71,64,58],[46,72,64,59],[46,75,64,62,"value"],[46,80,64,67],[46,81,64,68,"year"],[46,85,64,72],[47,6,65,4,"date"],[47,10,65,8],[47,11,65,9,"setFullYear"],[47,22,65,20],[47,23,65,21,"year"],[47,27,65,25],[47,29,65,27],[47,30,65,28],[47,32,65,30],[47,33,65,31],[47,34,65,32],[48,6,66,4,"date"],[48,10,66,8],[48,11,66,9,"setHours"],[48,19,66,17],[48,20,66,18],[48,21,66,19],[48,23,66,21],[48,24,66,22],[48,26,66,24],[48,27,66,25],[48,29,66,27],[48,30,66,28],[48,31,66,29],[49,6,67,4],[49,13,67,11,"date"],[49,17,67,15],[50,4,68,2],[51,2,69,0],[52,2,70,0,"exports"],[52,9,70,7],[52,10,70,8,"YearParser"],[52,20,70,18],[52,23,70,21,"YearParser"],[52,33,70,31],[53,0,70,32],[53,3]],"functionMap":{"names":["<global>","YearParser","parse","valueCallback","validate","set"],"mappings":"AAA;ACc;ECI;0BCC;MDG;GDqB;EGE;GHE;EIE;GJkB;CDC"}},"type":"js/module"}]}