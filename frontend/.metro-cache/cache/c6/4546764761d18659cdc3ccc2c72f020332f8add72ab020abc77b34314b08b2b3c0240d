{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":200,"column":0,"index":5701}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"6eZFbfKht0uO2NEVT/d8+i8B0s8="}},{"name":"axios","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"4fmpRhA0poIOZPSWyeqhuAF1vD4="}},{"name":"react/jsx-runtime","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":200,"column":0,"index":5701}}],"key":"5dCMGbjkz1QWCPjOwzvy5ZBkuK8="}}],"output":[{"data":{"code":"__d(function(g,_r,_i,a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,\"__esModule\",{value:!0}),_e.AuthProvider=function({children:e}){const[i,c]=(0,t.useState)(null),[l,f]=(0,t.useState)(null),[h,w]=(0,t.useState)(null),[p,k]=(0,t.useState)(!0);(0,t.useEffect)(()=>{y()},[]);const y=async()=>{try{const e=await r.default.getItem('accessToken'),t=await r.default.getItem('refreshToken');e&&t&&(f(e),w(t),await _(e))}catch(e){console.log('Error loading stored auth:',e)}finally{k(!1)}},_=async e=>{try{const t=await s.default.get(`${o}/api/auth/me`,{headers:{Authorization:`Bearer ${e}`}});c(t.data)}catch(e){if(401===e.response?.status){await T()||await v()}}},v=async()=>{await r.default.removeItem('accessToken'),await r.default.removeItem('refreshToken'),f(null),w(null),c(null)},T=async()=>{try{if(!h)return!1;const e=await s.default.post(`${o}/api/auth/refresh`,{refresh_token:h}),{access_token:t,refresh_token:n}=e.data;return await r.default.setItem('accessToken',t),await r.default.setItem('refreshToken',n),f(t),w(n),await _(t),!0}catch(e){return!1}},P={user:i,accessToken:l,refreshToken:h,isLoading:p,isAuthenticated:!!i,isPremium:i?.is_premium||!1,login:async(e,t)=>{try{const n=await s.default.post(`${o}/api/auth/login`,{email:e,password:t}),{access_token:u,refresh_token:i}=n.data;return await r.default.setItem('accessToken',u),await r.default.setItem('refreshToken',i),f(u),w(i),await _(u),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.detail||'Login failed. Please try again.'}}},signup:async(e,t,n)=>{try{const u=await s.default.post(`${o}/api/auth/signup`,{email:e,password:t,name:n}),{access_token:i,refresh_token:c}=u.data;return await r.default.setItem('accessToken',i),await r.default.setItem('refreshToken',c),f(i),w(c),await _(i),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.detail||'Signup failed. Please try again.'}}},logout:v,refreshUser:async()=>{l&&await _(l)},refreshAccessToken:T};return(0,n.jsx)(u.Provider,{value:P,children:e})},_e.useAuth=function(){const e=(0,t.useContext)(u);if(void 0===e)throw new Error('useAuth must be used within an AuthProvider');return e};var t=(function(e,t){if(\"function\"==typeof WeakMap)var r=new WeakMap,s=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,u={__proto__:null,default:e};if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return u;if(n=t?s:r){if(n.has(e))return n.get(e);n.set(e,u)}for(const t in e)\"default\"!==t&&{}.hasOwnProperty.call(e,t)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?n(u,t,o):u[t]=e[t]);return u})(e,t)})(_r(d[1])),r=e(_r(d[2])),s=e(_r(d[3])),n=_r(d[4]);const o=process.env.EXPO_PUBLIC_BACKEND_URL||'',u=(0,t.createContext)(void 0)});","lineCount":1,"map":[[1,112,38,7],[1,122,38,29,"children"],[1,131,38,31,"children"],[1,135,39,2],[1,141,39,9,"user"],[1,143,39,15,"setUser"],[1,147,39,26],[1,149,39,26,"useState"],[1,161,39,48],[1,168,40,9,"accessToken"],[1,170,40,22,"setAccessToken"],[1,174,40,40],[1,176,40,40,"useState"],[1,188,40,64],[1,195,41,9,"refreshToken"],[1,197,41,23,"setRefreshToken"],[1,201,41,42],[1,203,41,42,"useState"],[1,215,41,66],[1,222,42,9,"isLoading"],[1,224,42,20,"setIsLoading"],[1,228,42,36],[1,230,42,36,"useState"],[1,243,42,45],[1,247,45,2],[1,249,45,2,"useEffect"],[1,262,45,12],[1,267,46,4,"loadStoredAuth"],[1,272,47,5],[1,276,49,2],[1,282,49,8,"loadStoredAuth"],[1,284,49,25,"async"],[1,294,50,4],[1,298,51,6],[1,304,51,12,"storedAccess"],[1,312,51,33,"AsyncStorage"],[1,322,51,46,"getItem"],[1,330,51,54],[1,345,52,12,"storedRefresh"],[1,353,52,34,"AsyncStorage"],[1,363,52,47,"getItem"],[1,371,52,55],[1,387,54,10,"storedAccess"],[1,390,54,26,"storedRefresh"],[1,394,55,8,"setAccessToken"],[1,396,55,23,"storedAccess"],[1,399,56,8,"setRefreshToken"],[1,401,56,24,"storedRefresh"],[1,410,59,14,"fetchUserProfile"],[1,412,59,31,"storedAccess"],[1,415,61,4],[1,416,61,6],[1,422,61,13,"error"],[1,425,62,6,"console"],[1,433,62,14,"log"],[1,437,62,18],[1,466,62,48,"error"],[1,468,63,4],[1,469,63,5],[1,477,64,6,"setIsLoading"],[1,480,64,19],[1,482,65,4],[1,485,68,8,"fetchUserProfile"],[1,487,68,27,"async"],[1,497,69,4],[1,501,70,6],[1,507,70,12,"response"],[1,515,70,29,"axios"],[1,525,70,35,"get"],[1,529,70,39],[1,532,70,42,"API_BASE"],[1,548,70,66],[1,549,71,8,"headers"],[1,557,71,17],[1,558,71,19,"Authorization"],[1,572,71,34],[1,582,71,44,"token"],[1,589,73,6,"setUser"],[1,591,73,14,"response"],[1,593,73,23,"data"],[1,598,74,4],[1,599,74,6],[1,605,74,13,"error"],[1,608,76,6],[1,611,76,37],[1,617,76,10,"error"],[1,619,76,16,"response"],[1,629,76,26,"status"],[1,636,76,42],[1,643,77,32,"refreshAccessToken"],[1,654,79,16,"logout"],[1,657,81,6],[1,658,82,4],[1,661,134,8,"logout"],[1,663,134,17,"async"],[1,679,135,10,"AsyncStorage"],[1,689,135,23,"removeItem"],[1,700,135,34],[1,721,136,10,"AsyncStorage"],[1,731,136,23,"removeItem"],[1,742,136,34],[1,758,137,4,"setAccessToken"],[1,760,137,19],[1,766,138,4,"setRefreshToken"],[1,768,138,20],[1,774,139,4,"setUser"],[1,776,139,12],[1,783,148,8,"refreshAccessToken"],[1,785,148,29,"async"],[1,795,149,4],[1,799,150,6],[1,803,150,11,"refreshToken"],[1,805,150,25],[1,812,150,32],[1,814,152,6],[1,820,152,12,"response"],[1,828,152,29,"axios"],[1,838,152,35,"post"],[1,843,152,40],[1,846,152,43,"API_BASE"],[1,867,152,72],[1,868,153,8,"refresh_token"],[1,882,153,23,"refreshToken"],[1,887,156,12,"access_token"],[1,900,156,14,"access_token"],[1,902,156,28,"refresh_token"],[1,916,156,43,"new_refresh"],[1,919,156,59,"response"],[1,921,156,68,"data"],[1,926,166,6],[1,939,158,12,"AsyncStorage"],[1,949,158,25,"setItem"],[1,957,158,33],[1,971,158,48,"access_token"],[1,980,159,12,"AsyncStorage"],[1,990,159,25,"setItem"],[1,998,159,33],[1,1013,159,49,"new_refresh"],[1,1016,161,6,"setAccessToken"],[1,1018,161,21,"access_token"],[1,1021,162,6,"setRefreshToken"],[1,1023,162,22,"new_refresh"],[1,1032,164,12,"fetchUserProfile"],[1,1034,164,29,"access_token"],[1,1038,166,13],[1,1039,167,4],[1,1040,167,6],[1,1046,167,13,"error"],[1,1049,168,6],[1,1056,168,13],[1,1057,169,4],[1,1060,172,8,"value"],[1,1062,172,33],[1,1063,173,4,"user"],[1,1070,174,4,"accessToken"],[1,1084,175,4,"refreshToken"],[1,1099,176,4,"isLoading"],[1,1111,177,4,"isAuthenticated"],[1,1129,177,23,"user"],[1,1131,178,4,"isPremium"],[1,1141,178,15,"user"],[1,1144,178,21,"is_premium"],[1,1157,178,35],[1,1159,179,4,"login"],[1,1165,85,16,"async"],[1,1171,85,23,"email"],[1,1173,85,38,"password"],[1,1178,86,4],[1,1182,87,6],[1,1188,87,12,"response"],[1,1196,87,29,"axios"],[1,1206,87,35,"post"],[1,1211,87,40],[1,1214,87,43,"API_BASE"],[1,1233,87,70],[1,1234,88,8,"email"],[1,1242,89,8,"password"],[1,1256,92,12,"access_token"],[1,1269,92,14,"access_token"],[1,1271,92,26,"refresh_token"],[1,1285,92,28,"refresh_token"],[1,1288,92,46,"response"],[1,1290,92,55,"data"],[1,1295,102,6],[1,1308,94,12,"AsyncStorage"],[1,1318,94,25,"setItem"],[1,1326,94,33],[1,1340,94,48,"access_token"],[1,1349,95,12,"AsyncStorage"],[1,1359,95,25,"setItem"],[1,1367,95,33],[1,1382,95,49,"refresh_token"],[1,1385,97,6,"setAccessToken"],[1,1387,97,21,"access_token"],[1,1390,98,6,"setRefreshToken"],[1,1392,98,22,"refresh_token"],[1,1401,100,12,"fetchUserProfile"],[1,1403,100,29,"access_token"],[1,1406,102,13],[1,1407,102,15,"success"],[1,1416,102,24],[1,1418,103,4],[1,1419,103,6],[1,1425,103,13,"error"],[1,1428,105,6],[1,1434,105,13],[1,1435,105,15,"success"],[1,1444,105,24],[1,1446,105,31,"error"],[1,1452,104,22,"error"],[1,1454,104,28,"response"],[1,1464,104,38,"data"],[1,1470,104,44,"detail"],[1,1478,104,54],[1,1512,106,4],[1,1515,180,4,"signup"],[1,1522,109,17,"async"],[1,1528,109,24,"email"],[1,1530,109,39,"password"],[1,1532,109,57,"name"],[1,1537,110,4],[1,1541,111,6],[1,1547,111,12,"response"],[1,1555,111,29,"axios"],[1,1565,111,35,"post"],[1,1570,111,40],[1,1573,111,43,"API_BASE"],[1,1593,111,71],[1,1594,112,8,"email"],[1,1602,113,8,"password"],[1,1613,114,8,"name"],[1,1623,117,12,"access_token"],[1,1636,117,14,"access_token"],[1,1638,117,26,"refresh_token"],[1,1652,117,28,"refresh_token"],[1,1655,117,46,"response"],[1,1657,117,55,"data"],[1,1662,127,6],[1,1675,119,12,"AsyncStorage"],[1,1685,119,25,"setItem"],[1,1693,119,33],[1,1707,119,48,"access_token"],[1,1716,120,12,"AsyncStorage"],[1,1726,120,25,"setItem"],[1,1734,120,33],[1,1749,120,49,"refresh_token"],[1,1752,122,6,"setAccessToken"],[1,1754,122,21,"access_token"],[1,1757,123,6,"setRefreshToken"],[1,1759,123,22,"refresh_token"],[1,1768,125,12,"fetchUserProfile"],[1,1770,125,29,"access_token"],[1,1773,127,13],[1,1774,127,15,"success"],[1,1783,127,24],[1,1785,128,4],[1,1786,128,6],[1,1792,128,13,"error"],[1,1795,130,6],[1,1801,130,13],[1,1802,130,15,"success"],[1,1811,130,24],[1,1813,130,31,"error"],[1,1819,129,22,"error"],[1,1821,129,28,"response"],[1,1831,129,38,"data"],[1,1837,129,44,"detail"],[1,1845,129,54],[1,1880,131,4],[1,1883,181,4,"logout"],[1,1892,182,4,"refreshUser"],[1,1904,142,22,"async"],[1,1914,143,8,"accessToken"],[1,1923,144,12,"fetchUserProfile"],[1,1925,144,29,"accessToken"],[1,1929,183,4,"refreshAccessToken"],[1,1951,186,2],[1,1958,187,4],[1,1960,187,4,"_jsxRuntime"],[1,1962,187,4,"jsx"],[1,1967,187,5,"AuthContext"],[1,1969,187,17,"Provider"],[1,1978,187,25],[1,1979,187,26,"value"],[1,1985,187,33,"value"],[1,1987,187,39,"children"],[1,1996,188,7,"children"],[1,1999,191,0],[1,2001],[1,2012,193,7],[1,2023,194,2],[1,2029,194,8,"context"],[1,2032,194,18],[1,2034,194,18,"useContext"],[1,2048,194,29,"AuthContext"],[1,2051,195,2],[1,2059,195,18,"undefined"],[1,2063,195,6,"context"],[1,2065,196,4],[1,2071,196,10],[1,2075,196,14,"Error"],[1,2081,196,20],[1,2128,198,2],[1,2135,198,9,"context"],[1,2136,199,0],[1,2138,1,0],[1,2142,1,0,"_react"],[1,2145,3,26],[1,2154,3,26,"e"],[1,2156,3,26,"t"],[1,2159,3,26],[1,2181,3,26,"WeakMap"],[1,2189,3,26],[1,2193,3,26,"r"],[1,2195,3,26],[1,2199,3,26,"WeakMap"],[1,2207,3,26,"n"],[1,2209,3,26],[1,2213,3,26,"WeakMap"],[1,2221,3,26],[1,2237,3,26,"e"],[1,2239,3,26,"t"],[1,2242,3,26],[1,2246,3,26,"t"],[1,2249,3,26,"e"],[1,2254,3,26,"__esModule"],[1,2265,3,26],[1,2272,3,26,"e"],[1,2274,3,26],[1,2278,3,26,"o"],[1,2280,3,26,"i"],[1,2282,3,26,"f"],[1,2284,3,26],[1,2285,3,26,"__proto__"],[1,2295,3,26],[1,2300,3,26,"default"],[1,2308,3,26,"e"],[1,2311,3,26],[1,2321,3,26,"e"],[1,2324,3,26],[1,2341,3,26,"e"],[1,2344,3,26],[1,2363,3,26,"e"],[1,2365,3,26],[1,2372,3,26,"f"],[1,2374,3,26],[1,2377,3,26,"o"],[1,2379,3,26,"t"],[1,2381,3,26,"n"],[1,2383,3,26,"r"],[1,2385,3,26],[1,2389,3,26,"o"],[1,2391,3,26,"has"],[1,2395,3,26,"e"],[1,2398,3,26],[1,2405,3,26,"o"],[1,2407,3,26,"get"],[1,2411,3,26,"e"],[1,2414,3,26,"o"],[1,2416,3,26,"set"],[1,2420,3,26,"e"],[1,2422,3,26,"f"],[1,2424,3,26],[1,2435,3,26,"t"],[1,2440,3,26,"e"],[1,2442,3,26],[1,2454,3,26,"t"],[1,2457,3,26],[1,2460,3,26,"hasOwnProperty"],[1,2475,3,26,"call"],[1,2480,3,26,"e"],[1,2482,3,26,"t"],[1,2488,3,26,"i"],[1,2491,3,26,"o"],[1,2493,3,26,"Object"],[1,2500,3,26,"defineProperty"],[1,2517,3,26,"Object"],[1,2524,3,26,"getOwnPropertyDescriptor"],[1,2549,3,26,"e"],[1,2551,3,26,"t"],[1,2557,3,26,"i"],[1,2559,3,26,"get"],[1,2564,3,26,"i"],[1,2566,3,26,"set"],[1,2571,3,26,"o"],[1,2573,3,26,"f"],[1,2575,3,26,"t"],[1,2577,3,26,"i"],[1,2580,3,26,"f"],[1,2582,3,26,"t"],[1,2585,3,26,"e"],[1,2587,3,26,"t"],[1,2591,3,26],[1,2598,3,26,"f"],[1,2599,3,26],[1,2602,3,26,"e"],[1,2604,3,26,"t"],[1,2606,3,26],[1,2608,1,0,"_interopRequireWildcard"],[1,2609,1,0,"_r"],[1,2612,1,0,"d"],[1,2614,1,0],[1,2619,2,0,"_asyncStorage"],[1,2621,2,0,"_interopRequireDefault"],[1,2623,2,0,"_r"],[1,2626,2,0,"d"],[1,2628,2,0],[1,2633,3,0,"_axios"],[1,2635,3,0,"_interopRequireDefault"],[1,2637,3,0,"_r"],[1,2640,3,0,"d"],[1,2642,3,0],[1,2647,3,26,"_jsxRuntime"],[1,2649,3,26,"_r"],[1,2652,3,26,"d"],[1,2654,3,26],[1,2658,5,0],[1,2664,5,6,"API_BASE"],[1,2666,5,17,"process"],[1,2674,5,25,"env"],[1,2678,5,29,"EXPO_PUBLIC_BACKEND_URL"],[1,2703,5,56],[1,2706,36,6,"AuthContext"],[1,2709,36,20],[1,2711,36,20,"createContext"],[1,2733,36,63,"undefined"],[1,2735,199,1],[1,2738]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","fetchUserProfile","login","signup","logout","refreshUser","refreshAccessToken","useAuth"],"mappings":"AAA;OCqC;YCO;GDE;yBEE;GFiB;2BGE;GHe;gBIE;GJsB;iBKE;GLuB;iBME;GNM;sBOE;GPI;6BQE;GRsB;CDqB;OUE;CVM"}},"type":"js/module"}]}